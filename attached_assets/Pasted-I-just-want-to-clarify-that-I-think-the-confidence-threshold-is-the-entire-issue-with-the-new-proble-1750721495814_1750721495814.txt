I just want to clarify that I think the confidence threshold is the entire issue with the new problem creation. Get rid of the threshold or significantly reduce it (down to like < 50 %). 
1. I'm confused by your question. Consolidation should always happen when appropriate, but obviously we shouldn't try to consolidate conditions that aren't related? That would be stupid. You mean something like "chronic sinusitis" combined with "kidney stones" What use is that?? "chronic sinusitis exacerbated by kidney stones"????
2. Whatever length I just showed you is ideal but frankly it really varies. If nothing happened at all during the visit, the visit history should be zero characters. If one medication was changed but no recent labs or other helpful input, the visit history should be simply be "stopped lisinopril 10, started losartan 50mg", for example. On the other hand, if 5 medications were changed and there are relative recent labs and vitals, and a hospitalization concerning the problem, then that might be 4-5 phrases back to back! Trying to restrict GPT by character count doesn't work very well because of this sort of thing. It's much better to give it many GOOD examples. 
3. No. Consolidation should happen whether the problem list is empty or full. Like I said, medical records are notoriously unconsolidated. It's out job to take that information and consolidate it, if appropriate. 
4. Yes
5. No, I think we should instruct GPT to consolidate from the beginning (if appropriate). Don't be shy to give it lengthy prompts with lots of examples. I think you tend to not give GPT enough credit and you try to it a few paragraphs and hope it figures it out. It can handle long prompts to prompt it!

I don' tthink you should have the empty problm list logic that is more aggressive about problem creation. I don't even think you should have clearer decision trees for new vs existing patients. I think that just adds to the confusion. The main thing to do is adjust the confidence threshold wayyyy down and drastically beef up the prompt with lots of good examples. 